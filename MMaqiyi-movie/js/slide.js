(function() {
    var data1 = [{
        url: 'img/slide_1.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_2.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_3.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_4.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_5.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_6.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_7.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_8.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_9.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_10.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_11.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_12.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_13.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_14.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_15.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_16.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_17.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_18.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }];


    var data2 = [{
        url: 'img/slide_2.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'only'
    }, {
        url: 'img/slide_3.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'only'
    }, {
        url: 'img/slide_4.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'only'
    }, {
        url: 'img/slide_5.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_6.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_7.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_8.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_9.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_10.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'p1080p'
    }, {
        url: 'img/slide_11.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_12.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_13.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_14.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_15.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_16.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }, {
        url: 'img/slide_17.jpg',
        title: '唐人街探案',
        message: '王宝强爆笑破案',
        point: '8.0',
        toprightvip: 'VIP'
    }];

    // 数据
    var data = [data1, data2, data1, data2, data1];


    var aBox = U.getClass('qy-mod-list');
    for (var i = 0; i < aBox.length; i++) {

        slide(aBox[i], data[i])
    };

    function slide(obj, data) {
        var arrLi = []; // 存储所有的li
        var len = data.length; // 图片的总个数 
        var imgWidth = 215; // 一个图片的宽
        var odivWidth = document.documentElement.clientWidth;
        // var odivWidth = 1500;
        // console.log(odivWidth);
        if (odivWidth >= 1500) {
            odivWidth = 1500;
        }

        var n = 0; // 现在哪张图展示
        var m = Math.ceil(odivWidth / imgWidth);






        // 创建左右按钮
        var leftBtn = U.create('div');
        leftBtn.className = 'j_slider_left';
        leftBtn.style.display = 'none';
        U.append(obj, leftBtn);

        var rightBtn = U.create('div');
        rightBtn.className = 'j_slider_right';
        U.append(obj, rightBtn);


        // 创建ul
        var oUl = U.create('ul');
        for (var i = 0; i < len; i++) {
            var li = U.create('li');
            // ES6的模板字符串 ``
            li.innerHTML = ` 
            <img src="${data[i].url}" alt="">
            <div class="title-wrap">
                <i> 
                    <h3>${data[i].title}</h3>
                    <h5>${data[i].point}</h5>
                </i>

                <p>${data[i].message}</p>
            </div>
            <div class="topright ${data[i].toprightvip}"></div>`;

            arrLi.push(li);
            U.append(oUl, li);
        }
        U.append(obj, oUl);

        oUl.style.width = len * imgWidth + 'px'; // ul的宽











        // 上一张

        leftBtn.onclick = function() {
                n -= m;
                if (n <= 0) {
                    n = 0;
                    leftBtn.style.display = 'none';
                }
                rightBtn.style.display = 'block';
                change();
            }
            // 下一张

        rightBtn.onclick = function() {
            n += m;
            // console.log(n);
            if (n > len - m) {
                n = len - m;
                rightBtn.style.display = 'none';
            }
            leftBtn.style.display = 'block';
            change();
        }

        function change() {
            // 改变em的样式，只让有一个选中
            U.move(oUl, {
                left: -n * imgWidth
            });

        }






        // -------------------------------------
        // 滑上li
        var timer = null;
        for (var i = 0; i < arrLi.length; i++) {
            arrLi[i].onmouseenter = function() {
                var that = this;
                timer = setTimeout(function() {
                    // 获取位置
                    var o = U.getPos(that);
                    var left = o.left;
                    var top = o.top;
                    // console.log(o);

                    // 创建一个新的div
                    var newNode = U.create('div'); //当划上li【i】时创建一个div，里面放对应的li的内容；
                    newNode.innerHTML = that.innerHTML;
                    newNode.className = 'qy-video-info-tips';
                    newNode.style.left = left + 'px';
                    newNode.style.top = top + 'px';
                    newNode.onmouseleave = function() {
                        U.remove(this);
                    }

                    // 新创建的元素添加到body中来
                    U.append(document.body, newNode);

                    // 动画变大
                    U.move(newNode, {
                        width: 250,
                        height: 361,
                        left: left - 20,
                        top: top - 13
                    });
                }, 500);

            }

            arrLi[i].onmouseleave = function() {
                clearTimeout(timer);
            }
        }



    }


})();